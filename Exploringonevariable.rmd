Lesson 3
========================================================

***

### What to Do First?
Notes:

***

### Pseudo-Facebook User Data
Notes:

```{r Pseudo-Facebook User Data}
getwd()
list.files()
pf <- read.csv('pseudo_facebook.tsv', sep = '\t')
names(pf)
```

***

### Histogram of Users' Birthdays
Notes:

```{r Histogram of Users\' Birthdays}
install.packages('ggplot2')
library(ggplot2)
install.packages('ggthemes', dependencies = TRUE)
library(ggthemes)


names(pf)
ggplot(aes(x = dob_day), data = pf) + geom_histogram(binwidth = 1) + scale_x_continuous(breaks = 1:31)

ggplot(data = pf, aes(x = dob_day)) +
  geom_histogram(binwidth = 1) +
  scale_x_continuous(breaks = 1:31) +
  facet_wrap(~dob_month)

names (pf)
qplot(x = friend_count, data = pf)

qplot(x = friend_count, data = pf, binwidth = 25) +
  scale_x_continuous(limits = c(0, 1000), breaks = seq(0, 1000, 50))

qplot(x = friend_count, data = pf) +
  facet_grid(gender ~ .)
```

***

#### What are some things that you notice about this histogram?
Response: Most users tend to select 1st of January as their dob

***

### Moira's Investigation
Notes: Moira is investigating facebook users audience size and came up with an estatimate. She concluded based on her findings that users dramatically underestimate the size of their audience.

***

### Estimating Your Audience Size
Notes:

***

#### Think about a time when you posted a specific message or shared a photo on Facebook. What was it?
Response: A picture of myself

#### How many of your friends do you think saw that post?
Response: 25

#### Think about what percent of your friends on Facebook see any posts or comments that you make in a month. What percent do you think that is?
Response: 80%

***

### Perceived Audience Size
Notes: 25

***
### Faceting
Notes:

```{r Faceting}
qplot(x = dob_day, data = pf) +
  scale_x_continuous(breaks = 1:31) +
  facet_wrap(~dob_month, ncol = 3)

```

#### Let’s take another look at our plot. What stands out to you here?
Response: The 1st of January stands out as the dob most users choose

***

### Be Skeptical - Outliers and Anomalies
Notes: Outliers are sometimes accurate data about an extreme case and sometiimes outliers or anomalies represent bad data.

***

### Moira's Outlier
Notes:
#### Which case do you think applies to Moira’s outlier?
Response:
Bad data about an extreme case
***

### Friend Count
Notes:

#### What code would you enter to create a histogram of friend counts?

```{r Friend Count}
names (pf)
qplot(x = friend_count, data = pf)
```

#### How is this plot similar to Moira's first plot?
Response:
Both plots have one big, tall bar and one outlier.
***

### Limiting the Axes
Notes: Use the lim parameter inside the qplot which takes a vector with a start and end position of either axes as specified(in this case a 1000 friend counts)

```{r Limiting the Axes}
qplot(x = friend_count, data = pf, xlim = c(0, 1000))

qplot(x = friend_count, data = pf) +
  scale_x_continuous(limits = c(0, 1000))
qplot(x = friend_count, data = pf, binwidth = 25) +
  scale_x_continuous(limits = c(0, 1000), breaks = seq(0, 1000, 50))

```

### Exploring with Bin Width
Notes: When you adjust Bin Width you see a dramatic pattern of tall vertical lines as people typically tend to round up number of people who have seen their post to whole numbers like 20,50,100 etc.

***

### Adjusting the Bin Width
Notes: The histogram created looks skewed so there's need for adjustment by passing the bin width parameter to qplot and choose the value of 25 and break up the axis every 50 units

### Faceting Friend Count
```{r Faceting Friend Count}
# What code would you add to create a facet the histogram by gender?
# Add it to the code below.
qplot(x = friend_count, data = pf, binwidth = 10) +
  scale_x_continuous(limits = c(0, 1000),
                     breaks = seq(0, 1000, 50))
qplot(x = friend_count, data = pf) +
  facet_grid(gender ~ .)
```

***

### Omitting NA Values
Notes: Subset the data by using a condition for the second parameter and the "is na" function rather than the "na.omit" wrapper which removes any rows(or users) that have NA for ANY of the variables in the data set.

```{r Omitting NA Values}
qplot(x = friend_count, data = na.omit(pf), binwidth = 10) +
  scale_x_continuous(lim = c(0, 1000), breaks = seq(0, 1000, 50)) + 
  facet_wrap(~gender)
```

***

### Statistics 'by' Gender
Notes: Used the table command instead of looking at the histograms to check if there are more men vs women. Then used the by command to look at the avg friend count by gender which takes 3 inputs: a variable, a categorical variable or a list of indices to subset over and a function. Used the summary function here to get basic statistics on friend count.

```{r Statistics \'by\' Gender}
table(pf$gender)
by(pf$friend_count, pf$gender, summary)
```

#### Who on average has more friends: men or women?
Response: Women

#### What's the difference between the median friend count for women and men?
Response: 22

#### Why would the median be a better measure than the mean?
Response: The median is a better measure because it is a more robust statistic. The median marks the halfway point for all data points and is resistant to change while the mean can easily be dragged upwards by a few people with huge friend count which isn't necessarily represetative of most users.

***

### Tenure
Notes: The distribution of tenure or how long a user has been using facebook

```{r Tenure}
qplot(x = tenure, data = pf, binwidth = 30, color = I('black'), fill = I('#F79420'))
```

***

#### How would you create a histogram of tenure by year?

```{r Tenure Histogram by Year}
qplot(x = tenure/365, data = pf, binwidth = .25, color = I('black'), fill = I('#099009')) +
  scale_x_continuous(breaks = seq(1, 7, 1), limits = c(0, 7))
```

***

### Labeling Plots
Notes: Use xlab and ylab parameters, using commas after each parameter

```{r Labeling Plots}
qplot(x = tenure/365, data = pf, 
      xlab = 'Number of years using Facebook',
      ylab = 'Number of users in sample', 
      color = I('black'), fill = I('#F79420')) + 
  scale_x_continuous(breaks = seq(1, 7, 1), lim = c(0, 7))
```

***

### User Ages
Notes: Set binwidths to 1 to avoid unusual spikes in the data

```{r User Ages}
qplot(x = age, data = pf)

qplot(x = age, data = pf, binwidth = 1, color = I('black'), fill = I('#5760AB')) +
  scale_x_continuous(breaks = seq(0, 113, 5))
```

#### What do you notice?
Response: The largest spikes in ages are in the mid to late 20's and no users have put in an age less than 13 on the left side but this is probably because 13 is the minimum facebook signup age.

***

### The Spread of Memes
Notes: Memes tend to recur over time

***

### Lada's Money Bag Meme
Notes: It says Oct 2010 has five Fridays, Saturdays, Sundays and this is a lucky occcurence once in every 823 years which turns out to be false, it is actually a frequent occurrence. The Money Bag meme is adapted to facebook

***

### Transforming Data
Notes: We can transform our variable by taking the log, either using natural log, log base 2, or log base 10 or use other functions like square root function. Doing so helps to see patterns more clearly without being distracted by the log tails. Taking a log of the variable can help transform our data to a normal distribution
***

### Add a Scaling Layer
Notes: The difference in the two plots is in the x axis labeling. Using scale_x_log10 labels the axis in actual friend counts whereas using the log10 wrapper labels the x axis in log units

```{r Add a Scaling Layer}
logScale <- qplot(x = log10(friend_count), data = pf)

countScale <- ggplot(aes(x = friend_count), data = pf) + 
  geom_histogram() +
  scale_x_log10()

grid.arrange(logScale, countScale, ncol = 2)
```

***


### Frequency Polygons

```{r Frequency Polygons}
qplot(x = friend_count, data = subset(pf, !is.na(gender)),
binwidth = 10) +
scale_x_continuous(lim = c(0, 1000), breaks = seq(0, 1000, 50)) +
facet_wrap(~gender)

qplot(x = friend_count, y = ..count../sum(..count..),
data = subset(pf, !is.na(gender)),
xlab = 'Friend Count',
ylab = 'Proportion of Users with that friend count',
binwidth = 10, geom = 'freqpoly', color = gender) +
scale_x_continuous(lim = c(0, 1000), breaks = seq(0, 1000, 50))
```

***

### Likes on the Web
Notes:

```{r Likes on the Web}
by(pf$www_likes, pf$gender, sum)
```


***

### Box Plots
Notes: To see the differences between the distributions and also to see the difference between the median of the two groups. The 2 boxes cover the middle 50% of values/IQR

```{r Box Plots}
qplot(x = friend_count, data = subset(pf, !is.na(gender)), 
      binwidth = 25) +
  scale_x_continuous(limits = c(0, 1000), breaks = seq(0, 1000, 50)) +
  facet_wrap(~gender)

qplot(x = gender, y = friend_count,
      data = subset(pf, !is.na(gender)),
      geom = 'boxplot')
```

#### Adjust the code to focus on users who have friend counts between 0 and 1000.

```{r}
##Setting Y limits. Altering the axes and adjusting to focus on just the two boxes
qplot(x = gender, y = friend_count,
data = subset(pf, !is.na(gender)),
geom = 'boxplot', ylim = c(0, 1000))

qplot(x = gender, y = friend_count,
    data = subset(pf, !is.na(gender)),
    geom = 'boxplot') +
scale_y_continuous (limits = c(0, 1000))

qplot(x = gender, y = friend_count,
    data = subset(pf, !is.na(gender)),
    geom = 'boxplot') +
coord_cartesian(ylim = c(0, 1000))
```

***

### Box Plots, Quartiles, and Friendships
Notes: Use lower reasonable values to take a closer look at the bulk of the data. For the table output to match the boxplot and to avoid getting different quantiles, use the coord cartesian instead of the ylim parameter inside qplot

```{r Box Plots, Quartiles, and Friendships}
qplot(x = gender, y = friend_count,
    data = subset(pf, !is.na(gender)),
    geom = 'boxplot') + 
coord_cartesian(ylim = c(0, 250))

by(pf$friend_count, pf$gender, summary)
```

#### On average, who initiated more friendships in our sample: men or women?
Response: Women
#### Write about some ways that you can verify your answer.
Response: Used the friendships_initiated parameter in the qplot function  to check for friend requests and also ran a numerical summary using the by command, splitting the friendships_initiated by gender.
```{r Friend Requests by Gender}
qplot(x = gender, y = friendships_initiated,
    data = subset(pf, !is.na(gender)),
    geom = 'boxplot') +
coord_cartesian(ylim = c(0, 150))

by(pf$friendships_initiated, pf$gender, summary)
```

Response:

***

### Getting Logical
Notes: To get logical counts use comparison operators to check if someoe has actually checked in on a mobile device instead of tracking the count of mobile check ins. So a new variable mobile_check_in is created to track mobile check-ins.

```{r Getting Logical}
summary(pf$mobile_likes)

summary(pf$mobile_likes > 0)

mobile_check_in <- NA
pf$mobile_check_in <- ifelse(pf$mobile_likes > 0, 1, 0)
pf$mobile_check_in <- factor(pf$mobile_check_in)
summary(pf$mobile_check_in)

##Percent of check in using mobile device
summary(pf$mobile_check_in)
sum(pf$mobile_check_in == 1)/length(pf$mobile_check_in)
```
```{r Getting Logical}

##Percent of check in using mobile device
summary(pf$mobile_check_in)
sum(pf$mobile_check_in == 1)/length(pf$mobile_check_in)
```
Response: 65%

***

### Analyzing One Variable
Reflection: It's essential to closely look at all the variables in your data set individually, understand the types of values they take o, what their distributions look like, and whether there are missing values or outliers.
I managed to do all this in part by using histograms, box plots and frequency polygons which are the most basic and important tools for visualizing and understanding individual variables. I also made adjustments to these plots like changing the limit on some of the axes, adjusting the bin widths on the histograms and also transformed variables both logarithmically and by turning them into binaries to uncover hidden patterns in the data.

***

Click **KnitHTML** to see all of your hard work and to have an html
page of this lesson, your answers, and your notes!